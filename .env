DB_USERNAME=carlos
DB_PASSWORD=6798261677hH-!
DB_NAME=clinicaclick
DB_HOST=localhost
SERVER_IP=15.188.143.57  
MOCK_DATE=2024-06-06
# JWT Configuration - Clave secreta centralizada
JWT_SECRET=6798261677hH-1

# Configuración de cron para sincronizar estadistoicas de meta y tokens de usuarios
JOBS_AUTO_START=true
JOBS_TIMEZONE=Europe/Madrid
JOBS_METRICS_SCHEDULE="0 2 * * *"
JOBS_TOKEN_VALIDATION_SCHEDULE="0 */6 * * *"
JOBS_CLEANUP_SCHEDULE="0 3 * * 0"
JOBS_HEALTH_CHECK_SCHEDULE="0 * * * *" 
JOBS_SYNC_LOGS_RETENTION="7"              # Solo 7 días de logs

# Meta API Configuration
META_API_BASE_URL=https://graph.facebook.com/v23.0

# MetaSync posts fallback configuration
# Número de publicaciones recientes a recuperar siempre (además del rango)
METASYNC_POSTS_FALLBACK_LIMIT=30

# Ads Insights fetch configuration
# Días por chunk al pedir insights de Ads (reduce 500/timeout en rangos largos)
ADS_CHUNK_DAYS=3
# Límite de filas por página en llamadas a Ads Insights
ADS_PAGE_LIMIT=100

# Meta API client guardrails
# Retardo suave entre llamadas para no disparar el rate limit (ms)
METASYNC_REQUEST_DELAY_MS=200
# Porcentaje a partir del cual consideramos uso alto y aplicamos backoff
METASYNC_RATE_LIMIT_THRESHOLD=93
# Reintentos de errores no relacionados con rate limit
METASYNC_MAX_RETRIES=3
# Si true, al alcanzar rate limit esperamos hasta la próxima hora (en vez de reintentos cortos)
METASYNC_WAIT_NEXT_HOUR_ON_LIMIT=true

# Ruta del log del proceso (opcional) para endpoint de tail de logs
# Ejemplo con PM2: /home/ubuntu/.pm2/logs/clinicaclick-auth-out.log
PM2_LOG_PATH=/home/ubuntu/.pm2/logs/clinicaclick-auth-out.log
# APP_LOG_PATH=/var/log/clinicaclick-auth.log
